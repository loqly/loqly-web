(function(a,n){typeof exports=="object"&&typeof module<"u"?n(exports):typeof define=="function"&&define.amd?define(["exports"],n):(a=typeof globalThis<"u"?globalThis:a||self,n(a.LoqlyWeb={}))})(this,(function(a){"use strict";const n=async l=>{if(!l)throw new Error("API key is required");const t=window.location.href.includes("http://localhost")?"http://localhost:3000":"https://api.loqly.dev",e=await fetch(`${t}/v1/strings`,{method:"GET",headers:{Authorization:`Apikey ${l}`,"Content-Type":"application/json"}}),s=await e.json();if(!e.ok||s.error)throw new Error(s.error||"Something went wrong, please try again.");return s.strings?s.strings:{}};class u{constructor({apiKey:t,defaultLocale:e="en"}){this.apiKey=t,this._defaultLocale=e,this._locale=e,this._translations=null,this._translatableElements=[]}async init(){this._translations=await getTranslations(this.apiKey),this.cacheElements(),this.translateElements(this._translatableElements)}t(t,e={}){var i,o,r,h;const s=((o=(i=this._translations)==null?void 0:i[t])==null?void 0:o[this._locale])||((h=(r=this._translations)==null?void 0:r[t])==null?void 0:h[this._defaultLocale]);return s?Object.keys(e).reduce((d,c)=>d.replaceAll(`{{${c}}}`,e[c]),s):t}cacheElements(){this._translatableElements=Array.from(document.querySelectorAll("[data-t]"))}translateElements(t){t.forEach(e=>{const s=e.getAttribute("data-t");s&&(e.textContent=this.t(s))})}translatePage(){this._translatableElements.length||this.cacheElements(),this.translateElements(this._translatableElements)}updateLanguage(t){this._locale=t,this.translatePage()}get translations(){return this._translations}set translations(t){this._translations=t}get locale(){return this._locale}set locale(t){this.updateLanguage(t)}get defaultLocale(){return this._defaultLocale}set defaultLocale(t){this._defaultLocale=t}}a.default=u,a.getTranslations=n,Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
